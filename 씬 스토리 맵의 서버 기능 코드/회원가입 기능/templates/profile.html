<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>프로필</title>
    <style>
        .profile-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 50px;
        }

        .profile-pic {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background-color: #ccc;
            background-size: cover;
            background-position: center;
            cursor: pointer;
            transition: box-shadow 0.3s;
        }

        .profile-pic:hover {
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        #fileInput {
            display: none;
        }

        h2 {
            text-align: center;
        }
    </style>
</head>

<body>
    <h2>환영합니다, {{ nickname }}님!</h2>

    <form action="{{ url_for('upload_profile_pic') }}" method="POST" enctype="multipart/form-data">

        <label for="fileInput">
            <div class="profile-pic" id="profilePic"
                 style="background-image: url('{{ profile_img_url }}');"></div>
        </label>

        <input type="file" id="fileInput" name="profile_pic" accept="image/png, image/jpeg" onchange="loadPreview(event)">
        <button type="submit">프로필 사진 저장</button>

    </form>
    
    <script>
        function loadPreview(event) {
            const input = event.target;
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();

                reader.onload = function (e) {
                    document.getElementById('profilePic').style.backgroundImage = url('${e.target.result}');
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
    
</body>

</html>